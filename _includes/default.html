<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>{{ page.title }}</title>
	{% if page.description %}
	<meta name="description" content="{{ page.description }}">
	{% endif %}
	<meta name="author" content="{{ site.author.name }}">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Open Graph meta tags -->
	<meta property="og:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
	<meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
	<meta property="og:url" content="{{ site.BASE_PATH }}{% if page.url %}{{ page.url }}{% else %}/{% endif %}">
	<meta property="og:site_name" content="{{ site.title }}">
	<meta property="og:type" content="{% if page.layout == 'post' %}article{% else %}website{% endif %}">
	{% if page.layout == 'post' and page.date %}
	<meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
	<meta property="article:author" content="{{ site.author.name }}">
	{% endif %}
	{% if page.tags %}
	{% for tag in page.tags %}
	<meta property="article:tag" content="{{ tag }}">
	{% endfor %}
	{% endif %}

	<!-- Twitter Card meta tags -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
	<meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
	{% if site.author.twitter %}
	<meta name="twitter:site" content="@{{ site.author.twitter }}">
	<meta name="twitter:creator" content="@{{ site.author.twitter }}">
	{% endif %}

	<!-- SEO meta tags -->
	<link rel="canonical" href="{{ site.BASE_PATH }}{% if page.url %}{{ page.url }}{% else %}/{% endif %}">
	<meta name="robots" content="index, follow">
	<meta name="theme-color" content="#2c3e50">
	{% if page.layout == 'post' %}
	<meta name="article:publisher" content="{{ site.BASE_PATH }}">
	{% endif %}
	<meta name="format-detection" content="telephone=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="{{ site.BASE_PATH }}/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="{{ site.BASE_PATH }}/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="{{ site.BASE_PATH }}/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="{{ site.BASE_PATH }}/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="{{ site.name }}" href="{{ site.BASE_PATH }}/feed.xml">
	
	<!-- Google AdSense -->
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9782028920809175"
	     crossorigin="anonymous"></script>

	<!-- Structured Data (JSON-LD) -->
	<script type="application/ld+json">
	{
		"@context": "https://schema.org",
		{% if page.layout == 'post' %}
		"@type": "BlogPosting",
		"headline": "{{ page.title | escape }}",
		"description": "{% if page.description %}{{ page.description | escape }}{% else %}{{ page.title | escape }}{% endif %}",
		"author": {
			"@type": "Person",
			"name": "{{ site.author.name }}",
			"url": "{{ site.BASE_PATH }}"
		},
		"publisher": {
			"@type": "Organization",
			"name": "{{ site.title }}",
			"logo": {
				"@type": "ImageObject",
				"url": "http://www.gravatar.com/avatar/{{site.author.email_md5}}?s=200"
			}
		},
		"datePublished": "{{ page.date | date_to_xmlschema }}",
		"dateModified": "{{ page.date | date_to_xmlschema }}",
		"url": "{{ site.BASE_PATH }}{{ page.url }}",
		"mainEntityOfPage": {
			"@type": "WebPage",
			"@id": "{{ site.BASE_PATH }}{{ page.url }}"
		}
		{% else %}
		"@type": "WebSite",
		"name": "{{ site.title }}",
		"description": "{{ site.description }}",
		"url": "{{ site.BASE_PATH }}",
		"author": {
			"@type": "Person",
			"name": "{{ site.author.name }}"
		}
		{% endif %}
	}
	</script>
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse"
				data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			{% if site.author.github %}
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/{{ site.author.github }}">
				<i class="fa fa-github"></i>
			</a>
			{% endif %}
			{% if site.author.twitter %}
			<a type="button" class="navbar-toggle nav-link" href="http://twitter.com/{{ site.author.twitter }}">
				<i class="fa fa-twitter"></i>
			</a>
			{% endif %}
			{% if site.author.email %}
			<a type="button" class="navbar-toggle nav-link" href="mailto:{{ site.author.email }}">
				<i class="fa fa-envelope"></i>
			</a>
			{% endif %}
			<a class="navbar-brand" href="{{ site.BASE_PATH }}/">
				<img src="http://www.gravatar.com/avatar/{{site.author.email_md5}}?s=35" class="img-circle" />
				{{ site.title }}
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="{{ site.BASE_PATH }}/">首頁</a></li>
				<li><a href="{{ site.BASE_PATH}}/{{ site.categories_path }}">分類</a></li>
				<li><a href="{{ site.BASE_PATH}}/{{ site.archive_path }}">封存</a></li>
				<li><a href="{{ site.BASE_PATH}}/{{ site.tags_path }}">標籤</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
                	  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
                        	  });
	</script>

	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="{{ site.BASE_PATH}}/"><i class="fa fa-home"></i>首頁</a></li>
			<li><a href="{{ site.BASE_PATH}}/{{ site.categories_path }}"><i class="fa fa-folder"></i>分類</a></li>
			<li><a href="{{ site.BASE_PATH}}/{{ site.archive_path }}"><i class="fa fa-archive"></i>封存</a></li>
			<li><a href="{{ site.BASE_PATH}}/{{ site.tags_path }}"><i class="fa fa-tags"></i>標籤</a></li>

			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>回到頁首</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs"
		style="{% if site.sidebar_background_image %}background: url({{site.sidebar_background_image}}) no-repeat center center !important;{% endif %}">
		{% include sidebar.html %}
	</div>

	<div class="col-sm-9 col-sm-offset-3">
		{{ content }}

		<footer>
			<hr />
			<p>
				&copy; {{ site.time | date: '%Y' }} {{ site.author.name }} with Jekyll. Theme: <a
					href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript"
		src="{{ site.BASE_PATH }}/assets/resources/jquery/jquery-migrate-3.4.1.min.js"></script>
	<script type="text/javascript" src="{{ site.BASE_PATH }}/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="{{ site.BASE_PATH }}/assets/js/app.js"></script>

	<!-- Lazy Loading for Images -->
	<script>
		// Native lazy loading fallback for older browsers
		if ('loading' in HTMLImageElement.prototype) {
			// Native lazy loading is supported
			document.querySelectorAll('img[data-src]').forEach(img => {
				img.src = img.dataset.src;
				img.removeAttribute('data-src');
				img.setAttribute('loading', 'lazy');
			});
		} else {
			// Fallback for older browsers using Intersection Observer
			const imageObserver = new IntersectionObserver((entries, observer) => {
				entries.forEach(entry => {
					if (entry.isIntersecting) {
						const img = entry.target;
						img.src = img.dataset.src;
						img.removeAttribute('data-src');
						imageObserver.unobserve(img);
					}
				});
			});

			document.querySelectorAll('img[data-src]').forEach(img => {
				imageObserver.observe(img);
			});
		}

		// Add loading="lazy" to all images without it
		document.addEventListener('DOMContentLoaded', function() {
			document.querySelectorAll('img:not([loading])').forEach(img => {
				img.setAttribute('loading', 'lazy');
			});
		});
	</script>
</body>

</html>